{% extends "base.html" %}

{% load staticfiles %}

{% load cache %}

{% block title %}
    {{ object.title }}
{% endblock %}


{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/sidebar.css' %}">
<!--<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/styles/default.min.css">-->
<link rel="stylesheet" type="text/css" href="{% static 'css/atom-one-dark.css' %}">
{% endblock %}



{% block sidebar_btn %}

{% endblock %}



{% block content %}
<div id="wrapper">

        <!-- Sidebar -->
        <div id="sidebar-wrapper">
            <nav id="spy">
                <ul class="sidebar-nav nav">
                    <li>
                    <h3>Модулі</h3>
                </li>

                <!-- прогресс бар -->
                <li>
                    <div class="progress">
                        <div class="progress-bar" style="width: {{ lectures_completed }}%;"></div>
                    </div>
                </li>
                <li>
                    {{ lectures_completed|floatformat:"0" }} %
                </li>
                <!-- прогресс бар -->

                <!-- отображаем меню курса и содержание курса -->
                {% if modules %}
                    <li><a href="{% url 'student_course_detail' object.id %}">Curriculum</a></li>
                    <li><a href="{% url 'student_course_about' object.id %}">about course</a></li>
                {% else %}
                    <!-- цикл по модулям -->
                    {% for m in object.modules.all %}
                        <li>
                            <!--<a href="{% url 'student_course_detail_module' object.id m.id %}" data-id="{{ m.id }}" class="module">-->
                            <span>
                                Module <span class="order">{{ m.order|add:1 }}</span>
                            </span>
                            <br />
                            {{ m.title }}
                            <!--</a>-->
                        </li>
                        <!-- цикл по лекциям -->
                        {% for lec in m.lectures.all %}
                            <li>
                                <!-- добавлен id модуля для формирования ссылки на последнюю пройденую лекцию -->
                                <a href="{% url 'student_course_detail_module_lecture' object.id m.id lec.id %}?prev-lecture={{lecture.id}}&prev-module={{module_id}}" data-id="{{ lec.id }}" class="lecture">
                                    {{ lec.title }}
                                </a>
                            </li>
                        {% endfor %}
                    {% empty %}
                        <li>No modules yet.</li>
                    {% endfor %}
                {% endif %}
                </ul>
            </nav>
        </div>

        <!-- Page content -->
        <div class="content-side width100">
        <div class="row content-body">
        <div id="page-content-wrapper">
            <div class="content-header">
                <h1 id="home">
                    <a id="menu-toggle" href="#" class="glyphicon glyphicon-align-justify btn-menu toggle">
                    </a>
                    Sidebar Navigation Template
                </h1>
            </div>

            <div class="page-content inset" data-spy="scroll" data-target="#spy">
                <div class="row">
  
                        <div class="jumbotron text-center" >
                            <h1>Hello Beautiful!</h1>
                            <p>This is a sidebar navigation responsive template built off of Bootstrap 3.0 and simple sidebar template. It includes anchors, scroll spy, smooth scroll, and Awesome icon fonts.</p>
                            <p><a class="btn btn-default">Click On Me!</a>
                            <a class="btn btn-info">Tweet Me!</a></p>
                        </div>
    
                </div>
                <div class="row">
                    <div class="col-md-12 well">
                        <legend id="anch1">Anchor 1</legend>
                        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus ultricies, metus eget fringilla fermentum, sem justo pulvinar tellus, ac varius neque ante eget mi. Donec cursus nibh ultrices vulputate aliquet. Morbi nulla enim, molestie eu ullamcorper quis, placerat a mauris. Proin vel magna ullamcorper, vulputate leo eu, egestas odio. Vivamus erat leo, egestas in euismod sed, fermentum nec magna. Nunc nisi enim, euismod a tellus sit amet, fermentum adipiscing ipsum. Fusce rhoncus diam ac neque aliquam convallis. Etiam malesuada, nibh id rutrum euismod, enim augue gravida dolor, at vulputate felis mi at magna. Nulla luctus, libero eget luctus gravida, sapien enim varius massa, adipiscing aliquet lacus mi eu eros. Duis pretium laoreet ullamcorper. Aenean in mauris nec libero tincidunt pharetra non et dui. Sed tortor turpis, mollis et tempus eu, auctor laoreet neque. Etiam eu tortor rutrum, rutrum mauris sit amet, hendrerit augue. Sed ut tincidunt nisi. Nam consectetur velit ac pharetra venenatis.</p>
                        <p>Donec pellentesque id quam vel iaculis. Phasellus commodo tempor metus, eget sollicitudin odio ultricies id. Proin sed ipsum quis turpis suscipit luctus vitae id urna. Fusce et rhoncus quam. Etiam vel justo ligula. Nullam euismod lacinia risus a pulvinar. Pellentesque sit amet nisl eget ante vulputate feugiat. Suspendisse venenatis magna nunc, mollis facilisis neque condimentum ac. Vivamus non semper dui. Aenean sed eleifend dui. Vivamus a massa aliquam nibh consectetur luctus id at ligula. Nunc ipsum dolor, mollis at sem et, auctor rhoncus ipsum. Nulla faucibus venenatis est sit amet facilisis. In vestibulum nisi at tellus egestas, in pharetra enim fringilla. In ac erat non magna accumsan aliquam.</p>
                    </div>
                    <div class="col-md-12 well">
                        <legend id="anch2">Anchor 2</legend>
                        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus ultricies, metus eget fringilla fermentum, sem justo pulvinar tellus, ac varius neque ante eget mi. Donec cursus nibh ultrices vulputate aliquet. Morbi nulla enim, molestie eu ullamcorper quis, placerat a mauris. Proin vel magna ullamcorper, vulputate leo eu, egestas odio. Vivamus erat leo, egestas in euismod sed, fermentum nec magna. Nunc nisi enim, euismod a tellus sit amet, fermentum adipiscing ipsum. Fusce rhoncus diam ac neque aliquam convallis. Etiam malesuada, nibh id rutrum euismod, enim augue gravida dolor, at vulputate felis mi at magna. Nulla luctus, libero eget luctus gravida, sapien enim varius massa, adipiscing aliquet lacus mi eu eros. Duis pretium laoreet ullamcorper. Aenean in mauris nec libero tincidunt pharetra non et dui. Sed tortor turpis, mollis et tempus eu, auctor laoreet neque. Etiam eu tortor rutrum, rutrum mauris sit amet, hendrerit augue. Sed ut tincidunt nisi. Nam consectetur velit ac pharetra venenatis.</p>
                        <p>Donec pellentesque id quam vel iaculis. Phasellus commodo tempor metus, eget sollicitudin odio ultricies id. Proin sed ipsum quis turpis suscipit luctus vitae id urna. Fusce et rhoncus quam. Etiam vel justo ligula. Nullam euismod lacinia risus a pulvinar. Pellentesque sit amet nisl eget ante vulputate feugiat. Suspendisse venenatis magna nunc, mollis facilisis neque condimentum ac. Vivamus non semper dui. Aenean sed eleifend dui. Vivamus a massa aliquam nibh consectetur luctus id at ligula. Nunc ipsum dolor, mollis at sem et, auctor rhoncus ipsum. Nulla faucibus venenatis est sit amet facilisis. In vestibulum nisi at tellus egestas, in pharetra enim fringilla. In ac erat non magna accumsan aliquam.</p>
                    </div>
                    <div class="col-md-12 well">
                        <legend id="anch3">Anchor 3</legend>
                        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus ultricies, metus eget fringilla fermentum, sem justo pulvinar tellus, ac varius neque ante eget mi. Donec cursus nibh ultrices vulputate aliquet. Morbi nulla enim, molestie eu ullamcorper quis, placerat a mauris. Proin vel magna ullamcorper, vulputate leo eu, egestas odio. Vivamus erat leo, egestas in euismod sed, fermentum nec magna. Nunc nisi enim, euismod a tellus sit amet, fermentum adipiscing ipsum. Fusce rhoncus diam ac neque aliquam convallis. Etiam malesuada, nibh id rutrum euismod, enim augue gravida dolor, at vulputate felis mi at magna. Nulla luctus, libero eget luctus gravida, sapien enim varius massa, adipiscing aliquet lacus mi eu eros. Duis pretium laoreet ullamcorper. Aenean in mauris nec libero tincidunt pharetra non et dui. Sed tortor turpis, mollis et tempus eu, auctor laoreet neque. Etiam eu tortor rutrum, rutrum mauris sit amet, hendrerit augue. Sed ut tincidunt nisi. Nam consectetur velit ac pharetra venenatis.</p>
                        <p>Donec pellentesque id quam vel iaculis. Phasellus commodo tempor metus, eget sollicitudin odio ultricies id. Proin sed ipsum quis turpis suscipit luctus vitae id urna. Fusce et rhoncus quam. Etiam vel justo ligula. Nullam euismod lacinia risus a pulvinar. Pellentesque sit amet nisl eget ante vulputate feugiat. Suspendisse venenatis magna nunc, mollis facilisis neque condimentum ac. Vivamus non semper dui. Aenean sed eleifend dui. Vivamus a massa aliquam nibh consectetur luctus id at ligula. Nunc ipsum dolor, mollis at sem et, auctor rhoncus ipsum. Nulla faucibus venenatis est sit amet facilisis. In vestibulum nisi at tellus egestas, in pharetra enim fringilla. In ac erat non magna accumsan aliquam.</p>
                    </div>
                    <div class="col-md-12 well">
                        <legend id="anch4">Anchor 4</legend>
                        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus ultricies, metus eget fringilla fermentum, sem justo pulvinar tellus, ac varius neque ante eget mi. Donec cursus nibh ultrices vulputate aliquet. Morbi nulla enim, molestie eu ullamcorper quis, placerat a mauris. Proin vel magna ullamcorper, vulputate leo eu, egestas odio. Vivamus erat leo, egestas in euismod sed, fermentum nec magna. Nunc nisi enim, euismod a tellus sit amet, fermentum adipiscing ipsum. Fusce rhoncus diam ac neque aliquam convallis. Etiam malesuada, nibh id rutrum euismod, enim augue gravida dolor, at vulputate felis mi at magna. Nulla luctus, libero eget luctus gravida, sapien enim varius massa, adipiscing aliquet lacus mi eu eros. Duis pretium laoreet ullamcorper. Aenean in mauris nec libero tincidunt pharetra non et dui. Sed tortor turpis, mollis et tempus eu, auctor laoreet neque. Etiam eu tortor rutrum, rutrum mauris sit amet, hendrerit augue. Sed ut tincidunt nisi. Nam consectetur velit ac pharetra venenatis.</p>
                        <p>Donec pellentesque id quam vel iaculis. Phasellus commodo tempor metus, eget sollicitudin odio ultricies id. Proin sed ipsum quis turpis suscipit luctus vitae id urna. Fusce et rhoncus quam. Etiam vel justo ligula. Nullam euismod lacinia risus a pulvinar. Pellentesque sit amet nisl eget ante vulputate feugiat. Suspendisse venenatis magna nunc, mollis facilisis neque condimentum ac. Vivamus non semper dui. Aenean sed eleifend dui. Vivamus a massa aliquam nibh consectetur luctus id at ligula. Nunc ipsum dolor, mollis at sem et, auctor rhoncus ipsum. Nulla faucibus venenatis est sit amet facilisis. In vestibulum nisi at tellus egestas, in pharetra enim fringilla. In ac erat non magna accumsan aliquam.</p>
                    </div>
                </div>
            </div>

        </div>
        </div>
        </div>
    </div>



{% endblock %}


{% block extra_js %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/slideout/1.0.1/slideout.min.js"></script>
<script>
/*Menu-toggle*/
$("#menu-toggle").click(function(e) {
    e.preventDefault();
    $("#wrapper").toggleClass("active");
    $(".content-side").toggleClass('width100');
});


/*Smooth link animation*/
$('a[href*=#]:not([href=#])').click(function() {
    if (location.pathname.replace(/^\//, '') == this.pathname.replace(/^\//, '') || location.hostname == this.hostname) {

        var target = $(this.hash);
        target = target.length ? target : $('[name=' + this.hash.slice(1) + ']');
        if (target.length) {
            $('html,body').animate({
                scrollTop: target.offset().top
            }, 1000);
            return false;
        }
    }
});
</script>

<script type="text/javascript">
/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
$('#load-comments').click(function() {
  $(this).hide();
  var d = document, s = d.createElement('script');
  s.src = '//knuba.disqus.com/embed.js';
  s.setAttribute('data-timestamp', +new Date());
  (d.head || d.body).appendChild(s);
})


// do not hide comments button
//function loadComments() {
//var d = document, s = d.createElement('script');
//s.src = '//knuba.disqus.com/embed.js';
//s.setAttribute('data-timestamp', +new Date());
//(d.head || d.body).appendChild(s);
//}


// load disqus comments when page loaded
//(function() { // DON'T EDIT BELOW THIS LINE
//var d = document, s = d.createElement('script');
//s.src = '//knuba.disqus.com/embed.js';
//s.setAttribute('data-timestamp', +new Date());
//(d.head || d.body).appendChild(s);
//})();
</script>


{% if questions %}
<!-- js код для отображения вопросов теста -->
 <script type="text/javascript">

$(function () {
    // id вопросов для текущей лекции
    var ids = {{ questions }}
    
    //var url = 'api/lectures/' + {{ lecture.id }} + '/'
    //jQuery.get(url, function(data) {
    //    console.log(data);
    //})

// url api-запроса
var questions_url = 'api1/' + ids.join(',');
var quiz_data;
// получаем вопросы
jQuery.ajax({
    type: "get",
    async: false, // без этого data не сохраняется в переменной quiz_data
    url: questions_url,
    dataType: "json",
    success: function(data) {
        quiz_data = data;
        console.log(data);
    }

});

// контейнеры в которые будут отображатся данные
var content=$('content'),
    questionContainer = $("question"),
    additionalData = $("additional-data"),
    choicesContainer = $("choices"),
    scoreContainer = $("score"),
    submitBtn = $("submit");

var currentQuestion = 0,
    score = 0,
    askingQuestion = true;

var quizLength = ids.length;

// сокращенная функция к document.getElementById
function $(id) {
    return document.getElementById(id);
}

function askQuestion() {
    var choices = quiz_data[currentQuestion].answers,
        choicesHTML = "",
        choicesLength = choices.length;

    // формируем ответы на вопросы
    for (var i = 0; i < choicesLength; i++) {
        choicesHTML += "<input type='radio' name='quiz" +
        currentQuestion + "' id='choice" + (i + 1) + "' " +
        'value="' + choices[i].answer + '">' +
        " <label for='choice" + (i + 1) + "'>" +
        choices[i].answer +
        "</label><br>";
    }

    // выводит текст вопроса
    questionContainer.textContent = "Q" + (currentQuestion + 1) + ". " +
        quiz_data[currentQuestion].title;

    //
    additionalData.innerHTML = quiz_data[currentQuestion].data_field;

    // выводим ответы на вопросы
    choicesContainer.innerHTML = choicesHTML;

    // задаем сообщение о количестве правильных ответов
    if (currentQuestion === 0) {
        scoreContainer.textContent = "Score: " + score + " right answers out of " +
            quizLength + " possible.";
        submitBtn.textContent = "Submit Answer";
    }
  }

function checkAnswer() {
  // ответил ли пользователь на вопрос?
  if (askingQuestion) {
    submitBtn.textContent = "Next Question";
    askingQuestion = false;

    var userpick, // какой ответ выбрал пользователь
        userpick_index,// индекс пользовательского ответа
        correctIndex,// индекс правильного ответа
        radios = document.getElementsByName("quiz" + currentQuestion),
        radiosLength = radios.length;// количество ответов

    for (var i = 0; i < radiosLength; i++) {
        // проверяем какой из ответов был выбран
        if (radios[i].checked) {
            userpick = radios[i].value;
            userpick_index = i;
        }

        // получаем индекс правильного ответа
        if (quiz_data[currentQuestion].answers[i].correct) {
            correctIndex = i;
        }
    }

    // закрашиваем правильный ответ в зеленый, не правильный в красный
    var labels = document.getElementsByTagName('label');
    var labelStyle = labels[correctIndex].style;
    labelStyle.fontWeight = "bold";
    if (userpick_index == correctIndex) {
      score++;
      labelStyle.color = "green";
    } else {
      labelStyle.color = "green";
      labels[userpick_index].style.color = 'red';
    }

    scoreContainer.textContent = "Score: " + score + " right answers out of " +
        quizLength + " possible.";

  } else {
    // указываем что пользователь хочет перейти к след вопросу
    askingQuestion = true;
    submitBtn.textContent = "Submit Answer";
    // если есть след вопрос
    if (currentQuestion < quizLength - 1) {
        currentQuestion++;
        askQuestion();
    } else {
        // отображаем результат ели больше нет вопросов
        showFinalResults();
    }
  }
}

function showFinalResults() {
    content.innerHTML = "<h2>You've completed the quiz!</h2>" +
        "<h2>Below are your results:</h2>" +
        "<h2>" + score + " out of " + quizLength + " questions, " +
        Math.round(score / quizLength * 100) + "%<h2>";
}

window.addEventListener("load", askQuestion, false);
submitBtn.addEventListener("click", checkAnswer, false);
});

</script>
{% endif %}

<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js"></script>
<script type="text/javascript">
    $('pre').each(function(i, block) {
  hljs.highlightBlock(block);
});
</script>


{% endblock %}